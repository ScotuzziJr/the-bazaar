{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-4">
    <h2>{% if edit_mode %}Editar Projeto{% else %}Novo Projeto{% endif %}</h2>

    <form method="post">
        {% csrf_token %}
        
        <h4>Informações do Projeto</h4>
        {{ form|crispy }}

        <hr>
        <h4>Funções de Colaboração</h4>
        {{ formset.management_form }}
        {% for subform in formset %}
            <div class="border rounded p-3 mb-2">
                {{ subform|crispy }}
            </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary">
            {% if edit_mode %}Salvar Alterações{% else %}Criar Projeto{% endif %}
        </button>
        <a href="{% if edit_mode %}{% url 'project_detail' project.pk %}{% else %}{% url 'project_list' %}{% endif %}" 
           class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
